<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>üí∞ Money Tracker - Visakh</title>
  <style>
    :root {
      --green: #22c55e;
      --primary: #2563eb;
      --muted: #6b7280;
    }
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      background: #f8fafc;
      color: #111;
    }
    header {
      background: var(--primary);
      color: white;
      text-align: center;
      padding: 12px;
      font-size: 1.3rem;
      letter-spacing: 0.5px;
    }
    main {
      padding: 20px;
      max-width: 480px;
      margin: auto;
      background: white;
      border-radius: 16px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
      margin-top: 20px;
    }
    h2 {
      margin-bottom: 10px;
    }
    button {
      cursor: pointer;
      border: none;
      background: var(--primary);
      color: white;
      padding: 10px 15px;
      border-radius: 8px;
      font-size: 1rem;
    }
    button.ghost {
      background: #e5e7eb;
      color: #111;
    }
    input {
      padding: 8px;
      border-radius: 6px;
      border: 1px solid #ccc;
      width: 100%;
      margin-bottom: 10px;
    }
    #modal {
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: rgba(0,0,0,0.5);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 999;
    }
    #modalContent {
      background: white;
      border-radius: 12px;
      padding: 20px;
      width: 90%;
      max-width: 600px;
      max-height: 90vh;
      overflow-y: auto;
    }
    #closeModal {
      float: right;
      background: transparent;
      color: #444;
      font-size: 1.2rem;
      border: none;
      cursor: pointer;
    }
  </style>
</head>
<body>

<header>üí∞ Money Tracker</header>

<main>
  <h2>Welcome, User</h2>
  <p>Track your daily income and expenses easily.</p>

  <div style="display:flex;gap:10px;margin-top:10px;flex-wrap:wrap;">
    <button onclick="showUpgradeModal()">Upgrade ‚Çπ29</button>
    <button class="ghost" onclick="showAdminPanel()">Admin</button>
  </div>
</main>

<!-- Modal -->
<div id="modal">
  <div id="modalContent">
    <button id="closeModal" onclick="closeModal()">‚úñ</button>
  </div>
</div>

<script>
let modal = document.getElementById("modal");
let modalContent = document.getElementById("modalContent");

// ---------- BASIC VARIABLES ----------
const UPI_ID = "visakhsivaji95-4@okhdfcbank"; 
const ADMIN_PASSWORD = "admin123";
let premiumPhones = []; // Admin added phones

// ---------- MODAL FUNCTIONS ----------
function closeModal(){ modal.style.display = "none"; }

// ---------- UPGRADE MODAL ----------
function showUpgradeModal(){
  const adminPhoneFull = "919544599733";
  const waText = encodeURIComponent("I have paid ‚Çπ29 for Money Tracker Premium. My phone number is: ");
  const waLink = `https://wa.me/${adminPhoneFull}?text=${waText}`;

  modalContent.innerHTML = `
    <button id="closeModal" onclick="closeModal()">‚úñ</button>
    <h3>Upgrade to Premium ‚Äî ‚Çπ29 / month</h3>
    <p>Premium features: Export CSV, Export Monthly PDF and more.</p>
    <div style="display:flex;gap:12px;align-items:center;margin:10px 0;flex-wrap:wrap">
      <div style="width:180px;height:180px;border-radius:10px;background:#f7f8ff;display:flex;align-items:center;justify-content:center;flex-direction:column">
        <img src="" id="upiQrImg" alt="UPI QR" style="max-width:160px;max-height:160px;display:block;margin:8px 0;" onerror="this.style.display='none'"/>
        <small style="margin-top:8px;color:#333">Scan to pay using UPI</small>
      </div>
      <div style="flex:1;min-width:200px">
        <p style="margin:0 0 6px 0"><strong>Visakh Payment</strong></p>
        <p style="margin:0 0 6px 0">UPI ID: <strong>${UPI_ID}</strong></p>
        <p style="margin:0 0 6px 0;color:var(--muted)">After payment, click <strong>I Paid ‚Äî Send Phone</strong> and send your phone number on WhatsApp.</p>
        <div style="display:flex;gap:8px;margin-top:8px;flex-wrap:wrap">
          <button id="paidBtn" style="background:var(--green);color:#fff;padding:10px;border-radius:8px;border:none">I Paid ‚Äî Send Phone</button>
          <a href="${waLink}" target="_blank" style="text-decoration:none">
            <button style="background:#25D366;color:#fff;padding:10px;border-radius:8px;border:none">WhatsApp Admin</button>
          </a>
        </div>
      </div>
    </div>
  `;
  modal.style.display = "flex";

  document.getElementById('paidBtn').onclick = ()=> {
    const phone = prompt("Enter the phone number you used for payment:");
    if(!phone) return alert("Please enter your phone number.");
    const userMsg = encodeURIComponent(`I paid ‚Çπ29 for Money Tracker Premium. My phone: ${phone}`);
    window.open(`https://wa.me/${adminPhoneFull}?text=${userMsg}`, "_blank");
    alert("WhatsApp opened ‚Äî send your phone number to Admin for verification.");
  };
}

// ---------- ADMIN PANEL ----------
function showAdminPanel(){
  const pass = prompt("Enter Admin Password:");
  if(pass !== ADMIN_PASSWORD){ alert("Wrong password"); return; }

  let html = `<button id="closeModal" onclick="closeModal()">‚úñ</button>
  <h3>Admin Panel</h3>
  <p>Add or remove premium users (by phone number)</p>
  <input id="newPhone" placeholder="Enter phone number"/>
  <div style="display:flex;gap:10px;margin-bottom:10px;">
    <button onclick="addPhone()">Add</button>
    <button class="ghost" onclick="removePhone()">Remove</button>
  </div>
  <h4>Premium Users:</h4>
  <ul id="phoneList">${premiumPhones.map(p=>`<li>${p}</li>`).join('')}</ul>`;
  modalContent.innerHTML = html;
  modal.style.display = "flex";
}

function addPhone(){
  const newP = document.getElementById("newPhone").value.trim();
  if(!newP) return alert("Enter a number");
  if(premiumPhones.includes(newP)) return alert("Already added");
  premiumPhones.push(newP);
  alert("Added ‚úÖ");
  showAdminPanel();
}

function removePhone(){
  const num = document.getElementById("newPhone").value.trim();
  if(!num) return alert("Enter a number");
  premiumPhones = premiumPhones.filter(p=>p!==num);
  alert("Removed ‚ùå");
  showAdminPanel();
}
</script>

</body>
</html>
